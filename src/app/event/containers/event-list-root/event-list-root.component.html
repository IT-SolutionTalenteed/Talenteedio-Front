<div class="event-container">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">Découvrez nos <span class="accent">Événements</span></h1>
      <p class="hero-description">Participez à des événements professionnels, conférences et ateliers</p>
    </div>
  </div>

  <!-- Events by Categories -->
  <div class="categories-section">
    <app-loader [isLoading]="loadingCategories">
      <div class="category-block" *ngFor="let category of categoriesWithEvents; let isLast = last">
        <div class="category-header">
          <h2 class="category-title">
            <span class="category-icon">
              <!-- Night icon -->
              <svg *ngIf="category.slug === 'night'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
              <!-- Day icon -->
              <svg *ngIf="category.slug === 'day'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              <!-- Conférences icon -->
              <svg *ngIf="category.slug === 'conferences'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <!-- Ateliers icon -->
              <svg *ngIf="category.slug === 'ateliers'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
              </svg>
              <!-- Networking icon -->
              <svg *ngIf="category.slug === 'networking'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
              </svg>
              <!-- Webinaires icon -->
              <svg *ngIf="category.slug === 'webinaires'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="8" y1="21" x2="16" y2="21"></line>
                <line x1="12" y1="17" x2="12" y2="21"></line>
              </svg>
              <!-- Default icon for other categories -->
              <svg *ngIf="category.slug !== 'night' && category.slug !== 'day' && category.slug !== 'conferences' && category.slug !== 'ateliers' && category.slug !== 'networking' && category.slug !== 'webinaires'" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </span>
            {{ category.name }}
          </h2>
          <button 
            class="view-more-btn" 
            (click)="viewMoreCategory(category.id)"
            *ngIf="category.totalEvents > 6"
          >
            Voir plus ({{ category.totalEvents }})
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>
        
        <div class="events-grid">
          <div class="event-card" *ngFor="let event of category.events">
            <a [routerLink]="['/event/detail', event.slug]" class="card-link">
              <div class="card-content">
                <div class="event-date">
                  <div class="date-day">{{ event.date | date: 'dd' }}</div>
                  <div class="date-month">{{ event.date | date: 'MMM' }}</div>
                </div>
                <div class="event-info">
                  <h3 class="event-title">{{ event.title }}</h3>
                  <p class="event-excerpt" *ngIf="event.content" [innerHTML]="event.content | slice:0:120"></p>
                  <div class="event-meta">
                    <span class="meta-item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                      </svg>
                      {{ event.date | date: 'dd/MM/yyyy' }}
                    </span>
                  </div>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
      
      <!-- Message if no categories have events -->
      <div class="no-events-message" *ngIf="!loadingCategories && categoriesWithEvents.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <p>Aucun événement disponible pour le moment</p>
      </div>
    </app-loader>
  </div>

  <!-- Company Events Section - Displayed AFTER all categories -->
  <div class="company-events-section" *ngIf="!loadingCategories && categoriesWithEvents.length > 0">
    <div class="section-header">
      <h2 class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        Événements des Entreprises
      </h2>
      <p class="section-description">Découvrez les derniers événements publiés par nos entreprises partenaires</p>
    </div>
    
    <app-loader [isLoading]="loadingCompanyEvents">
      <div class="events-grid" *ngIf="companyEvents.length > 0">
        <div class="event-card" *ngFor="let event of companyEvents">
          <a [routerLink]="['/event/detail', event.slug]" class="card-link">
            <div class="card-content">
              <div class="event-date">
                <div class="date-day">{{ event.date | date: 'dd' }}</div>
                <div class="date-month">{{ event.date | date: 'MMM' }}</div>
              </div>
              <div class="event-info">
                <h3 class="event-title">{{ event.title }}</h3>
                <p class="event-excerpt" *ngIf="event.content" [innerHTML]="event.content | slice:0:120"></p>
                <div class="event-meta">
                  <span class="meta-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    {{ event.date | date: 'dd/MM/yyyy' }}
                  </span>
                  <span class="meta-item" *ngIf="event.category">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                      <line x1="7" y1="7" x2="7.01" y2="7"></line>
                    </svg>
                    {{ event.category.name }}
                  </span>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
      
      <div class="no-events-message" *ngIf="!loadingCompanyEvents && companyEvents.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <p>Aucun événement d'entreprise disponible pour le moment</p>
      </div>
      
      <div class="view-all-container" *ngIf="companyEvents.length > 0">
        <button class="view-all-btn" [routerLink]="['/event/list']">
          Voir tous les événements
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </app-loader>
  </div>
</div>
