<div class="category-detail-container">
  <app-loader [isLoading]="loading">
    <div *ngIf="category">
      <!-- Hero Section - Clean and minimal -->
      <div class="category-hero">
        <div class="hero-content">
          <div class="breadcrumb">
            <a routerLink="/event/list">Événements</a>
            <span class="separator">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </span>
            <span class="current">{{ category.name }}</span>
          </div>
          <h1 class="category-title">{{ category.name }}</h1>
          <p class="category-subtitle" *ngIf="category.subtitle">{{ category.subtitle }}</p>
          <div class="category-stats">
            <span class="stat-badge">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
              </svg>
              {{ totalEvents }} événement{{ totalEvents > 1 ? 's' : '' }}
            </span>
          </div>
        </div>
      </div>

      <!-- Category Image Section - Large display below hero -->
      <div class="category-image-section" *ngIf="category.image">
        <div class="image-container">
          <img [src]="category.image" [alt]="category.name" />
        </div>
      </div>

      <!-- Description Section - Clean card -->
      <div class="content-section" *ngIf="category.description">
        <div class="section-container">
          <div class="description-card">
            <p class="description-text">{{ category.description }}</p>
          </div>
        </div>
      </div>

      <!-- Events List Section -->
      <div class="events-section">
        <div class="section-container">
          <div class="section-header">
            <h2 class="section-title">Événements à venir</h2>
            <p class="section-subtitle" *ngIf="totalEvents > 0">
              Découvrez {{ totalEvents }} événement{{ totalEvents > 1 ? 's' : '' }} dans cette catégorie
            </p>
          </div>

          <app-loader [isLoading]="eventsLoading">
            <div class="events-grid" *ngIf="events.length > 0">
              <a [routerLink]="['/event/detail', event.slug]" class="event-card" *ngFor="let event of events">
                <div class="event-date">
                  <div class="date-day">{{ event.date | date: 'dd' }}</div>
                  <div class="date-month">{{ event.date | date: 'MMM' }}</div>
                </div>
                <div class="event-content">
                  <h3 class="event-title">{{ event.title }}</h3>
                  <p class="event-excerpt" *ngIf="event.content" [innerHTML]="event.content | slice:0:150"></p>
                  <div class="event-meta">
                    <span class="meta-item">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12.5 7H11V13L16.2 16.2L17 14.9L12.5 12.2V7Z" fill="currentColor"/>
                      </svg>
                      {{ event.date | date: 'dd MMMM yyyy' }}
                    </span>
                    <span class="meta-item" *ngIf="event.companies && event.companies.length > 0">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" fill="none"/>
                        <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" fill="none"/>
                      </svg>
                      {{ event.companies[0].company_name }}
                    </span>
                  </div>
                </div>
                <div class="event-arrow">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </a>
            </div>

            <div class="no-events-message" *ngIf="!eventsLoading && events.length === 0">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
              </svg>
              <p>Aucun événement disponible dans cette catégorie pour le moment</p>
            </div>

            <!-- Pagination -->
            <div class="pagination-container" *ngIf="totalEvents > pageSize">
              <app-pagination
                [totalItems]="totalEvents"
                [initialValue]="{ page: currentPage, pageSize: pageSize }"
                (paginate)="onPageChange($event)"
              ></app-pagination>
            </div>
          </app-loader>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="faq-section" *ngIf="category.faq && category.faq.length > 0">
        <div class="section-container">
          <app-faq-accordion 
            [faqItems]="category.faq"
            [title]="'Questions fréquentes'"
          ></app-faq-accordion>
        </div>
      </div>
    </div>

    <!-- Category Not Found -->
    <div class="not-found" *ngIf="!loading && !category">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2"/>
      </svg>
      <h2>Catégorie introuvable</h2>
      <p>La catégorie que vous recherchez n'existe pas ou a été supprimée.</p>
      <a routerLink="/event/list" class="back-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Retour aux événements
      </a>
    </div>
  </app-loader>
</div>
